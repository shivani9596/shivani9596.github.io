/*!CK:2544003547!*//*1445229978,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["GJPjI"]); }

__d('OnlyMeSharerSaveNux.react',['AsyncRequest','Banzai','ContextualLayer.react','ContextualLayerBlind','CSS','DataStore','DOM','DOMScroll','Keys','Link.react','Parent','React','URI','XSavedForLaterNUXSeenController','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIContextualDialogFooter.react','XUIContextualDialogTitle.react','XUIDialogButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){if(c.__markCompiled)c.__markCompiled();var ca=s.PropTypes,da=null,ea=null,fa='OnlyMeSharerSaveNux_instance',ga='OnlyMeSharerSaveNux_caretMenuLoaded',ha="_5jmm",ia="_54ne",ja='impression',ka='saved_for_later:click',la='only_me_sharer_nux',ma='learn_more_link',na='only_me_sharer_nux',oa='caret',pa='dismiss_button',qa='esc_button',ra={paddingTop:0,paddingRight:0,paddingBottom:5,paddingLeft:7},sa=s.createClass({displayName:'OnlyMeSharerSaveNux',propTypes:{caretId:ca.string.isRequired,storyContainerId:ca.string.isRequired,wrapper:ca.any,collectionId:ca.number.isRequired,objectId:ca.number},statics:{saveOptionLoaded:function(ta){var ua=document.getElementById(ta);if(ua!=null){var va=r.byClass(ua,ha);m.set(va,ga,true);var wa=m.get(va,fa);if(wa&&wa.state.isShown)wa._onCaretMenuClick();}}},getInitialState:function(){return {isShown:true};},_createCustomContextualLayerBlind:function(ta){var ua,va;ua=babelHelpers.inherits(wa,k);va=ua&&ua.prototype;function wa(xa){'use strict';va.constructor.call(this,xa,ta);}return wa;},_onCaretMenuClick:function(event){var ta=document.getElementById(this.props.storyContainerId),ua=r.byClass(ta,ha);if(m.get(ua,ga)===true)setTimeout(function(){var va=n.scry(document,'li.save_caret_menu_item');for(var wa=0;wa<va.length;wa++){var xa=va[wa],ya=r.byClass(xa,'uiLayer');if(ya&&l.shown(ya)){l.addClass(xa,ia);var za=m.get(ua,fa);za._logDismissal(oa);var ab=m.get(ea,'Popover');ab&&ab.subscribeOnce('hide',function(){l.removeClass(xa,ia);});break;}}},0);},_onKeyUp:function(event){if(event.keyCode===p.ESC&&this.state.isShown){document.removeEventListener('keyup',this._onKeyUp);this._logDismissal(qa);}},_onButtonClick:function(){this._logDismissal(pa);},_onLearnMoreLinkClick:function(){i.post(ka,{og_object_id:this.props.objectId,collection_id:this.props.collectionId,surface:la,mechanism:ma},{retry:true,delay:0});},_logDismissal:function(ta){this.setState({isShown:false});i.post(ka,{og_object_id:this.props.objectId,collection_id:this.props.collectionId,surface:la,mechanism:ta},{retry:true,delay:0});},_onToggle:function(ta){if(ea!=null&&!ta)ea.removeEventListener('click',this._onCaretMenuClick);if(this.props.wrapper!=null){var ua=r.byClass(this.props.wrapper,'uiLayer');l.hide(ua);}},componentWillMount:function(){da=this._createCustomContextualLayerBlind(babelHelpers._extends({},ra));ea=document.getElementById(this.props.caretId);},componentDidMount:function(){var ta=document.getElementById(this.props.storyContainerId),ua=r.byClass(ta,ha);m.set(ua,fa,this);if(ea!=null)ea.addEventListener('click',this._onCaretMenuClick);document.addEventListener('keyup',this._onKeyUp);setTimeout(function(){o.ensureVisible(ea);},500);var va=u.getURIBuilder().setEnum('surface','story').setEnum('mechanism',na).setInt('collection_id',this.props.collectionId).setInt('object_id',this.props.objectId).setEnum('action',ja).getURI(),wa=new h(va);wa.send();},render:function(){return (s.createElement(v,{shown:this.state.isShown,contextRef:function(){return ea;},position:'below',alignment:'right',behaviors:{grayedOutLayer:da},width:400,offsetX:-3,onToggle:this._onToggle},s.createElement(y,null,ba._("Share successful")),s.createElement(w,null,ba._("Want a faster way to save posts privately? Open this dropdown menu and click Save.")),s.createElement(x,null,s.createElement(q,{className:"_222f",href:new t('/help/516581611792218'),target:'_blank',onClick:this._onLearnMoreLinkClick},ba._("Learn More")),s.createElement(z,{label:ba._("Got it"),use:'confirm',action:'cancel',onClick:this._onButtonClick}))));}});f.exports=sa;},null);
/*!CK:744619683!*//*1444016629,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["15DuS"]); }

__d('ReactComposerDragDropPromptContainer.react',['ReactComposerAttachmentType','ReactComposerConfig','ReactComposerDragDropPromptLazy.react','ReactComposerPhotoUploader','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerScrapedAttachmentActions','ReactComposerScrapedAttachmentStore','ReactComposerScrapedAttachmentPhotoDropWarningDialog.react','ReactComposerStatusUtils','ReactComposerVideoUploadStore','ReactComponentWithPureRenderMixin','React','ReactLayeredComponentMixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=s.PropTypes,v=s.createClass({displayName:'ReactComposerDragDropPromptContainer',_uploader:undefined,mixins:[r,t,l(q)],propTypes:{root:u.object.isRequired,config:i.isRequired},statics:{calculateState:function(w,x,y){return {enabled:!q.getVideo(w)};}},getAttachmentInitialState:function(w,x){return {photoDropWarningShown:false,pendingFiles:null};},componentWillMount:function(){var w=this.props.config.attachmentsConfig[h.STATUS],x=this.props.config.attachmentsConfig[h.MEDIA];this._uploader=new k(this.context,x.photoLimit,{disableFaceRecognition:x.disableFaceboxTagger});m.enabled(this.context.composerID,w.canScrapeShare);},renderLayers:function(){return {photoDropWarningDialog:s.createElement(o,{shown:this.state.photoDropWarningShown,onCancel:this._onPhotoDropWarningCancel,onConfirm:this._onPhotoDropWarningConfirm})};},render:function(){if(!this.state.enabled)return null;return (s.createElement(j,{root:this.props.root,onFilesDrop:this._onFilesDrop,onURLDrop:this._onURLDrop}));},_onFilesDrop:function(w){if(n.hasAttachment(this.context.composerID)&&this.state.pendingFiles==null){this.setState({photoDropWarningShown:true,pendingFiles:w});return;}p.uploadDroppedFiles(this.context.composerID,w,this._uploader);},_onPhotoDropWarningCancel:function(){this.setState({photoDropWarningShown:false,pendingFiles:null});},_onPhotoDropWarningConfirm:function(){var w=this.state.pendingFiles;this.setState({photoDropWarningShown:false,pendingFiles:null});this._onFilesDrop(w);},_onURLDrop:function(w){p.scrapeLink(this.context.composerID,this.context.targetID,w,this.context.composerType);}});f.exports=v;},null);
/*!CK:1700793319!*//*1442933526,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["yiS7Q"]); }

__d('SpotlightViewerThumbnailMixin',['PhotoStore','Vector'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={_getInitialPhotoData:function(){var k=h.getIndexForID(this.props.setid,this.props.photoid),l=h.getByIndexImmediate(this.props.setid,k);return l?l:this._getThumbnailPhotoData();},_getThumbnailPhotoData:function(){if(!this.props.dimensions||!this.props.thumbsrc)return null;var k={id:this.props.photoid};for(var l=0;l<this.props.dimensions.length;++l){var m=i.deserialize(this.props.dimensions[l]);k['image'+l]={width:m.x,height:m.y,uri:this.props.thumbsrc};}return k;}};f.exports=j;},null);
__d('SpotlightSnowflakePhotoViewer',['ArbiterMixin','React','SpotlightViewer','SpotlightViewerAutoResize','SpotlightViewerBehaviorsMixin','SpotlightViewerClose','SpotlightViewerCoreMixin','SpotlightViewerDimensionMixin','SpotlightViewerPagers','SpotlightViewerPageWithKeys','SpotlightViewerThumbnailMixin','SpotlightViewport','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=i.createClass({displayName:'SpotlightSnowflakePhotoViewer',mixins:[h,l,n,r,o],behaviors:[q,k],getViewerID:function(){return 'photoviewer';},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=null;},getInitialState:function(){this._subscriptions=new t();return {photoData:this._getInitialPhotoData(),open:true};},_enableSubscriptions:function(){this.props.useloadingindicator&&this._subscriptions.addSubscriptions(this.viewState.subscribe('photo_fetch',this.setState.bind(this,{photoData:null},null)));},render:function(){var v=this.getMedia(),w=this.getStageDimensions(),x=this.props.useloadingindicator&&!this.state.photoData;return (i.createElement(j,{open:this.state.open,onHide:this.close},i.createElement(s,{media:v,showLoadingIndicator:x,stageDimensions:w,onClick:this._onClickViewport},i.createElement(m,{onClick:this.close}),this.props.disablepaging?null:i.createElement(p,null))));}});f.exports=u;},null);
__d('CampfireImageViewer',['DOM','Event','React','ReactDOM','SpotlightSnowflakePhotoViewer','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n={registerPopup:function(o,p){i.listen(o,'click',function(q){n.bootstrap({src:p.src,fbid:p.id,dimensions:[p.width,p.height].join(','),disablePaging:true});});},bootstrap:function(o){var p=j.createElement(l,{dimensions:[o.dimensions],open:true,disablepaging:true,photoid:o.fbid,reverse:false,rootClassName:o.rootClassName,thumbsrc:o.src});n.render(p);},render:function(o){var p=m('campfire_viewer');if(!p){p=h.create('div',{id:'messages_viewer'});document.body.appendChild(p);}o=k.render(o,p);o.subscribeOnce('close',function(){k.unmountComponentAtNode(p);});}};f.exports=n;},null);
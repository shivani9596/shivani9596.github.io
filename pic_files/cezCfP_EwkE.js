/*!CK:199028625!*//*1445223949,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["WriiF"]); }

__d("MNCommerceErrors",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ALREADY_UNLINKED:1893001};},null,{});
__d("MNCommerceReplyTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={COMMERCE_LINK:2};},null,{});
__d("P2PPaymentLogMessageSubtype",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail"};},null,{});
__d('MNCommerceDialogStateActions',['MessengerDispatcher','MNCommerceActionTypes'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={showDialog:function(k,l){h.dispatch({type:i.DIALOG.SHOW,dialogContainer:k,state:l});},hideDialog:function(){h.dispatch({type:i.DIALOG.HIDE});}};f.exports=j;},null);
__d('MNCommerceButton.react',['CurrentEnvironment','MessengerDialogButton.react','React','XUIButton.react'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'MNCommerceButton',render:function(){var m=h.messengerdotcom,n=m?i:k,o=this.props.type;if(!o)o=this.props.type==='confirm'?'primary':'secondary';var p=m?'default':this.props.use,q=babelHelpers._extends({},this.props,{type:o,use:p});return (j.createElement(n,q,this.props.children));}});f.exports=l;},null);
__d('MNCommerceAttachmentConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:'subTotal',SHIPPING:'shippingCost',TAX:'tax',TOTAL:'totalCost'}};f.exports=h;},null);
__d('MNCommerceDialog.react',['CurrentEnvironment','LayerFadeOnHide','LayerHideOnEscape','MNCommerceAttachmentConstants','MessengerDialog.react','React','XUIDialog.react','cx','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=m.PropTypes,s=m.createClass({displayName:'MNCommerceDialog',propTypes:{onToggle:r.func,shown:r.bool,width:r.number.isRequired},getDefaultProps:function(){return {onToggle:p,repositionOnUpdate:true,shown:true,width:h.messengerdotcom?k.MDOTCOMDIALOG.WIDTH:k.DIALOG.WIDTH};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout((function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}).bind(this),0);},render:function(){var t=h.messengerdotcom,u=t?l:n;return (m.createElement(u,babelHelpers._extends({behaviors:{LayerFadeOnHide:i,LayerHideOnEscape:j}},this.props,{className:q(this.props.className,t?"_3rx0":''),ref:'dialog'}),this.props.children));}});f.exports=s;},null);
__d('MNCommerceDialogBody.react',['CurrentEnvironment','MessengerDialogBody.react','React','XUIDialogBody.react'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'MNCommerceDialogBody',render:function(){var m=h.messengerdotcom,n=m?i:k;return (j.createElement(n,this.props,this.props.children));}});f.exports=l;},null);
__d('MNCommerceDialogFooter.react',['CurrentEnvironment','MessengerDialogFooter.react','React','XUIDialogFooter.react','cloneWithProps','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.createClass({displayName:'MNCommerceDialogFooter',render:function(){var o=h.messengerdotcom,p=o?i:k,q,r=this.props.children;if(o){q=j.Children.count(this.props.children);r=j.Children.map(this.props.children,function(s,t){if(!s)return null;return l(s,{className:"_4ec0",type:t===0&&q===2?'secondary':'primary'});});}return (j.createElement(p,this.props,r));}});f.exports=n;},null);
__d('MNCommerceDialogTitle.react',['CurrentEnvironment','MessengerDialogHeader.react','React','XUIDialogTitle.react'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'MNCommerceDialogTitle',render:function(){var m=h.messengerdotcom,n=m?i:k;return (j.createElement(n,this.props,this.props.children));}});f.exports=l;},null);
__d('MNCommerceUnlinkDialog.react',['MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','React','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=m.PropTypes,p=m.createClass({displayName:'MNCommerceUnlinkDialog',propTypes:{onCancelButtonClick:o.func,onTurnOffButtonClick:o.func},render:function(){var q=n._("Cancel"),r=n._("Turn Off");return (m.createElement(i,{onToggle:this.props.onToggle,shown:this.props.shown},m.createElement(l,{showCloseButton:false},n._("Unlink account?")),m.createElement(j,null,m.createElement('div',null,n._("You can turn off updates if you didn't sign up or just don't want to get them anymore."))),m.createElement(k,null,m.createElement(h,{label:q,onClick:this.props.onCancelButtonClick,use:'default'}),m.createElement(h,{label:r,onClick:this.props.onTurnOffButtonClick,use:'confirm'}))));}});f.exports=p;},null);
__d('MNCommerceLoggingConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={DIALOG_SURFACE:{SHIPMENT:'shipment',RECEIPT:'receipt',UNLINK:'unlink',UNLINK_ERROR:'unlink_error'}};f.exports=h;},null);
__d('MNCommerceUnlinkErrorDialog.react',['MNCommerceAttachmentConstants','MNCommerceErrors','React','MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=j.PropTypes,r=j.createClass({displayName:'MNCommerceUnlinkErrorDialog',propTypes:{errorType:q.number,onOkayButtonClick:q.func},render:function(){var s=p._("OK"),t=null,u=null;switch(this.props.errorType){case i.ALREADY_UNLINKED:u=j.createElement('div',null,p._("Updates Are Already Off"));t=j.createElement('div',null,p._("You aren't getting updates in Messenger."));break;default:u=j.createElement('div',null,p._("Couldn't Turn Off Updates"));t=j.createElement('div',null,p._("Sorry, something went wrong. Please try again."));break;}return (j.createElement(l,{onToggle:this.props.onToggle,shown:this.props.shown,width:h.UNLINK_ERROR_DIALOG.WIDTH},j.createElement(o,null,u),j.createElement(m,null,t),j.createElement(n,null,j.createElement(k,{label:s,onClick:this.props.onOkayButtonClick,use:'confirm'}))));}});f.exports=r;},null);
__d('MNCommerceUnlinkDialogContainer.react',['BanzaiLogger','MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceUnlinkDialog.react','MNCommerceUnlinkErrorDialog.react','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=o.createClass({displayName:'MNCommerceUnlinkDialogContainer',render:function(){var q=j.getState();if(q&&q.errorType){h.log('MessengerCommerceLoggerConfig',{event:l.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:k.DIALOG_SURFACE.UNLINK_ERROR})});return (o.createElement(n,{onToggle:this._onToggle,shown:!!q,errorType:q.errorType,onOkayButtonClick:this._hideDialog}));}else{h.log('MessengerCommerceLoggerConfig',{event:l.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:k.DIALOG_SURFACE.UNLINK})});return (o.createElement(m,{onToggle:this._onToggle,shown:!!q,onCancelButtonClick:this._hideDialog,onTurnOffButtonClick:q&&q.onTurnOffButtonClick}));}},_onToggle:function(q){if(!q)this._hideDialog();},_hideDialog:function(){i.hideDialog();}});f.exports=p;},null);
__d("XMNCommerceUnlinkController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/messages\/commerce\/unlink\/",{page_id:{type:"String",required:true},user_id:{type:"String",required:true}});},null,{});
__d('MNCommerceUnlinkDataManager',['AsyncRequest','MNCommerceDialogStateActions','MNCommerceUnlinkDialogContainer.react','XMNCommerceUnlinkController'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();l.prototype.unlink=function(m,n){var o=k.getURIBuilder().setString('page_id',m).setString('user_id',n).getURI();new h().setURI(o).setErrorHandler(this.$MNCommerceUnlinkDataManager1).send();};l.prototype.$MNCommerceUnlinkDataManager1=function(m){i.showDialog(j,{errorType:m.error});};function l(){}f.exports=new l();},null);
__d('MercuryCallLogMessage.react',['FBRTCCore','FBRTCLogger','React','SimpleXUIDialog','Tooltip.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=j.createClass({displayName:'MercuryCallLogMessage',render:function(){if(this.props.isAnswered){return (this._renderAnsweredCallLogMessage(this.props.peerFBID,this.props.peerName,this.props.isOutgoingCall));}else return (this._renderMissedCallLogMessage(this.props.peerFBID,this.props.peerName,this.props.isOutgoingCall));},_renderAnsweredCallLogMessage:function(p,q,r){var s=n._("Call {firstname}",[n.param('firstname',q)]),t;if(r){t=n._("You called {firstname}.",[n.param('firstname',q)]);}else t=n._("{firstname} called you.",[n.param('firstname',q)]);return this._generateCallLink(t,s,p,q);},_renderMissedCallLogMessage:function(p,q,r){var s,t;if(r){s=n._("{firstname} missed a call from you.",[n.param('firstname',q)]);t=n._("Call {firstname} again",[n.param('firstname',q)]);}else{s=n._("You missed a call from {firstname}.",[n.param('firstname',q)]);t=n._("Call {firstname} back",[n.param('firstname',q)]);}return this._generateCallLink(s,t,p,q);},_generateCallLink:function(p,q,r,s){if(h.shouldEnableVideoCalling()){return (j.createElement('a',{className:"_1xpw",onClick:this._handleClick.bind(this,r,s)},j.createElement(l,{alignH:'center',position:'above',tooltip:q},p)));}else return (j.createElement('span',{className:"_1xpw"},p));},_handleClick:function(p,q){if(h.isAvailableForWebrtcCalling(p)){h.startOutgoingCall(p,i.Trigger.ADMIN_MESSAGE,false);}else k.show(n._("{firstname} can't be called because they are temporarily offline.",[n.param('firstname',q)]),n._("Can't Connect Call"));}});f.exports=o;},null);
__d('MNCommerceLogMessageUtils',['BanzaiLogger','Link.react','MercuryIDs','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceUnlinkDataManager','MNCommerceDialogStateActions','MNCommerceReplyTypes','MNCommerceUnlinkDialogContainer.react','React','cx','fbt','invariant','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=c('MercuryThreads').get();v.prototype.isCommercePageAdminMessage=function(w){return !!(w&&w.log_message_data&&w.log_message_data.replyType===o.COMMERCE_LINK);};v.prototype.getCommercePageUnlink=function(w,x){var y=function(){var z=j.getUserIDFromParticipantID(w.author),aa=u.getThreadMetaNow(w.thread_id);!aa?t(0):undefined;var ba=null;aa.participants.every(function(da){if(da!==w.author){ba=j.getUserIDFromParticipantID(da);return false;}return true;});var ca=function(){n.hideDialog();m.unlink(z,ba);};n.showDialog(p,{onTurnOffButtonClick:ca});h.log('MessengerCommerceLoggerConfig',{event:l.DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:k.DIALOG_SURFACE.UNLINK})});};return (q.createElement('span',null,w.log_message_body,' ',q.createElement(i,{className:(!x?"_2w2m":'')+(x?' '+"_1jvn":''),onClick:y},s._("Turn Off"))));};function v(){}f.exports=new v();},null);
__d('P2PBigAmount.react',['CurrentEnvironment','Image.react','React','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=j.PropTypes,n=j.createClass({displayName:'P2PBigAmount',propTypes:{amount:m.string.isRequired,isPending:m.bool,size:m.oneOf(['medium','large'])},getDefaultProps:function(){return {size:'medium'};},getImage:function(){if(this.isMessengerDotCom()){if(this.props.isPending){return l('/images/p2p/message-icon-dark-gray.png');}else if(this.props.size==='large'){return l('/images/p2p/message-icon-messenger-blue.png');}else return l('/images/p2p/message-icon-blue.png');}else if(this.props.isPending){return l('/images/p2p/message-icon-gray.png');}else if(this.props.size==='large'){return l('/images/p2p/message-icon-facebook-blue.png');}else return l('/images/p2p/message-icon-www-blue.png');},isMessengerDotCom:function(){return h.messengerdotcom;},render:function(){var o=this.props.size==='large'?'24':'16';return (j.createElement('div',{className:"_8j6"+(this.isMessengerDotCom()?' '+"_8j7":'')+(this.props.size==='large'?' '+"_1fv":'')},j.createElement('div',{className:"_8j8"},j.createElement(i,{height:o,src:this.getImage(),width:o})),j.createElement('div',{className:"_8jc"+(this.props.isPending?' '+"_8jd":'')+(this.props.amount.length>=8?' '+"_8je":'')+(' '+"_3oh-")},this.props.amount)));}});f.exports=n;},null);
__d("XP2PTransactionDetailController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/p2p\/transaction\/",{id:{type:"String",required:true}});},null,{});
__d('P2PMercuryLogMessage.react',['CurrentEnvironment','CurrentUser','Link.react','MercuryIDs','P2PGroupSendReceiptDialog.react','P2PPaymentLogMessageSubtype','React','ReactLayeredComponentMixin','XP2PTransactionDetailController','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s=n.PropTypes,t=n.createClass({displayName:'P2PMercuryLogMessage',mixins:[o],propTypes:{amount:s.string,receiver:s.object.isRequired,sender:s.object.isRequired,subtype:s.oneOf(Object.keys(m).map(function(u){return m[u];})),transferID:s.string.isRequired,threadFBID:s.string,threadID:s.string},getDefaultProps:function(){return {amount:'',sender:null,receiver:null,subtype:null};},getInitialState:function(){return {groupSendReceiptDetailsShown:false};},handleGroupDetailsLinkClicked:function(){this.setState({groupSendReceiptDetailsShown:true});},handleThirdPartyReceiptDialogClosed:function(){this.setState({groupSendReceiptDetailsShown:false});},isViewerSender:function(){return (k.getUserIDFromParticipantID(this.props.sender.id)===i.getID());},isViewerReceiver:function(){return (k.getUserIDFromParticipantID(this.props.receiver.id)===i.getID());},renderTransferDetailsLink:function(){var u=p.getURIBuilder().setString('id',this.props.transferID).getURI();return (n.createElement(j,{className:"_kiq",href:u,target:'_blank'},r._("See details")));},renderGroupDetailsLink:function(){return (n.createElement(j,{className:"_kiq",href:'#',onClick:this.handleGroupDetailsLinkClicked},r._("See details")));},renderLayers:function(){var u={};if(this.state.groupSendReceiptDetailsShown){var v={full_name:this.props.receiver.name,id:this.props.receiver.id,picture:this.props.receiver.image_src,profile_uri:this.props.receiver.href},w={full_name:this.props.sender.name,id:this.props.sender.id,picture:this.props.sender.image_src,profile_uri:this.props.sender.href};u.groupSendReceiptDetailsDialog=n.createElement(l,{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,receiver:v,sender:w});}return u;},render:function(){var u=null,v=this.props.amount,w=this.props.subtype,x=this.isViewerSender(),y=this.isViewerReceiver(),z;if(!x&&!y){z=this.renderGroupDetailsLink();}else z=this.renderTransferDetailsLink();switch(w){case m.SENT_IN_GROUP:u=r._("{sendername} sent {amount} to {receivername}. {details}",[r.param('sendername',this.props.sender.name),r.param('amount',v),r.param('receivername',this.props.receiver.name),r.param('details',z)]);break;case m.CANCELED_EXPIRED:case m.CANCELED_SAME_CARD:case m.CANCELED_SENDER_RISK:case m.CANCELED_RECIPIENT_RISK:case m.CANCELED_CUSTOMER_SERVICE:if(x){u=r._("Your {amount} payment was canceled. {details}",[r.param('amount',v),r.param('details',this.renderTransferDetailsLink())]);}else if(y){u=r._("{name}'s {amount} payment was canceled. {details}",[r.param('name',this.props.sender.name),r.param('amount',v),r.param('details',this.renderTransferDetailsLink())]);}else u=r._("{sender_name}'s {amount} payment to {receiver_name} was canceled. {details}",[r.param('sender_name',this.props.sender.name),r.param('amount',v),r.param('receiver_name',this.props.receiver.name),r.param('details',z)]);u=n.createElement('span',{className:"_5rdx"},u);break;case m.CANCELED_DECLINED:if(x){u=r._("{name} didn't accept your {amount} payment. {details}",[r.param('name',this.props.receiver.name),r.param('amount',v),r.param('details',this.renderTransferDetailsLink())]);}else if(y){u=r._("You didn't accept {name}'s {amount} payment. {details}",[r.param('name',this.props.sender.name),r.param('amount',v),r.param('details',this.renderTransferDetailsLink())]);}else u=r._("{receiver_name} didn't accept {sender_name}'s {amount} payment. {details}",[r.param('receiver_name',this.props.receiver.name),r.param('sender_name',this.props.sender.name),r.param('amount',v),r.param('details',z)]);u=n.createElement('span',{className:"_5rdx"},u);break;}return (n.createElement('div',{className:h.messengerdotcom?"_5rdy":''},u));}});f.exports=t;},null);
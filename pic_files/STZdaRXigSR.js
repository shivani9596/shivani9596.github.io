/*!CK:1427023385!*//*1444538450,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["BbsVE"]); }

__d("XCollectionRecommendationCarouselController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/timeline\/app_collection\/recommendation\/carousel\/",{collection_token:{type:"String",required:true},cursor:{type:"String",required:true},id:{type:"String",required:true},itemsize:{type:"Int",required:true},itemsperpage:{type:"Int",required:true},itemstooverfetch:{type:"Int",required:true},surface:{type:"String",required:true},surface_collection_id:{type:"Int",required:true}});},null,{});
__d('OGCollectionRecommendationCarousel',['Arbiter','AsyncRequest','CSS','DataStore','DOM','Event','Parent','PageLikeConstants','XCollectionRecommendationCarouselController','csx','cx','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t='OGCollectionRecommendationCarousel',u={},v={};function w(ea,fa,ga,ha){'use strict';this.$OGCollectionRecommendationCarousel1=fa;this.$OGCollectionRecommendationCarousel2=ha.collection_token;this.$OGCollectionRecommendationCarousel3=ga;this.$OGCollectionRecommendationCarousel4=fa.getNode().id;this.$OGCollectionRecommendationCarousel5=ha.surface;this.$OGCollectionRecommendationCarousel6=ha.surface_collection_id;this.$OGCollectionRecommendationCarousel7=ea;this.$OGCollectionRecommendationCarousel8=ha.item_size;this.$OGCollectionRecommendationCarousel9=ha.items_per_page;this.$OGCollectionRecommendationCarousel10=ha.items_to_over_fetch;u[ea]={carousel:fa,collectionToken:ha.collection_token};k.set(t,this.$OGCollectionRecommendationCarousel4,this);k.set(t,this.$OGCollectionRecommendationCarousel2,this);if(!ga){fa.endCarousel();return;}s([this.$OGCollectionRecommendationCarousel1.subscribe('needsitems',this.$OGCollectionRecommendationCarousel11.bind(this))]);h.subscribe(o.LIKED,this.$OGCollectionRecommendationCarousel12.bind(this));h.subscribe(o.UNLIKED,this.$OGCollectionRecommendationCarousel13.bind(this));}w.prototype.$OGCollectionRecommendationCarousel11=function(){'use strict';new i(p.getURIBuilder().setString('collection_token',this.$OGCollectionRecommendationCarousel2).setString('cursor',this.$OGCollectionRecommendationCarousel3).setString('id',this.$OGCollectionRecommendationCarousel4).setInt('itemsize',this.$OGCollectionRecommendationCarousel8).setInt('itemsperpage',this.$OGCollectionRecommendationCarousel9).setInt('itemstooverfetch',this.$OGCollectionRecommendationCarousel10).setString('surface',this.$OGCollectionRecommendationCarousel5).setInt('surface_collection_id',this.$OGCollectionRecommendationCarousel6).getURI()).send();};w.prototype.$OGCollectionRecommendationCarousel12=function(ea,fa){'use strict';var ga=n.byClass(fa.target,"_58rc");if(!ga)return;v[fa.profile_id]=ga;x(ga,true);var ha=n.byClass(ga,"_596n");if(ha&&this.$OGCollectionRecommendationCarousel7===ha.id)da(ha.id);};w.prototype.$OGCollectionRecommendationCarousel13=function(ea,fa){'use strict';var ga=v[fa.profile_id];if(!ga)return;x(ga,false);};w.prototype.$OGCollectionRecommendationCarousel14=function(ea,fa){'use strict';if(!fa||!ea||ea.length===0){this.$OGCollectionRecommendationCarousel1.endCarousel();return;}this.$OGCollectionRecommendationCarousel3=fa;this.$OGCollectionRecommendationCarousel1.addItems(ea);};w.update=function(ea,fa,ga){'use strict';var ha=k.get(t,ga);if(ha)ha.$OGCollectionRecommendationCarousel14(ea,fa);};w.removeItemFromRecommendations=function(ea,fa){'use strict';return ca(ea,fa);};w.plusRecommendation=function(ea,fa,ga,ha,ia,ja){'use strict';var ka=u[fa];if(ea!=fa&&ka){var la=l.scry(ka.carousel.getNode(),'[data-obj="'+ha+'"]');if(la&&la.length>0){var ma=n.byClass(la[0],"_58rc");ba(fa,ma);}}var na=null;if(ja){na=ca(ea,ga);}else na=z(ea,ga);return {ignored_item_ids:na};};w.postPlusRecommendation=function(ea,fa){'use strict';var ga=w.getWrapperID(ea,fa);da(ga);};w.slideLeftOneUnitAfterAction=function(ea){'use strict';da(ea);};w.getWrapperID=function(ea,fa){'use strict';return 'recommendation_carousel_'+ea+'_'+fa;};function x(ea,fa){var ga=l.scry(ea,"._vfm")[0],ha="_4rtx";if(ga)fa?j.addClass(ga,ha):j.removeClass(ga,ha);}function y(ea){var fa=l.scry(ea,"._3owb")[0];if(fa)return fa.getAttribute('data-obj');}function z(ea,fa){var ga=[],ha=u[ea].carousel.getVisibleNodes(),ia=y(fa);for(var ja=0;ja<ha.length;++ja){var ka=y(ha[ja]);if(ia===ka)break;if(ka)ga.push(ka);}return ga;}function aa(ea){j.addClass(ea,"_42fn");var fa=m.listen(ea,'mouseover',function(){j.removeClass(ea,"_42fn");fa.remove();});}function ba(ea,fa){if(fa){var ga=fa.nextSibling;ga&&aa(ga);u[ea].carousel.removeItem(fa);}u[ea].carousel.refresh();}function ca(ea,fa){var ga=z(ea,fa);ba(ea,fa);return ga;}function da(ea){var fa=u[ea].carousel;if(fa){var ga=fa._carousel._grid.querySelector(':hover');fa.slide(1,300);var ha=ga.nextSibling;if(ha){j.addClass(ha,"_46lc");var ia=m.listen(ha,'mouseover',function(){j.removeClass(ha,"_46lc");ia.remove();});}}}f.exports=w;},null);
__d('OGCollectionRecommendationQuestionWrapper',['CSS','Event','Parent','OGCollectionRecommendationCarousel','cx','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(o,p,q,r,s,t,u){'use strict';this.$OGCollectionRecommendationQuestionWrapper1=o;this.$OGCollectionRecommendationQuestionWrapper2=p;this.$OGCollectionRecommendationQuestionWrapper3=q;this.$OGCollectionRecommendationQuestionWrapper4=r;this.$OGCollectionRecommendationQuestionWrapper5=t;this.$OGCollectionRecommendationQuestionWrapper6=u;m(s.subscribe('answered',(function(v,w){var x=j.byClass(this.$OGCollectionRecommendationQuestionWrapper5,'selected');if(w==='yes'){var y=this.$OGCollectionRecommendationQuestionWrapper4;if(this.$OGCollectionRecommendationQuestionWrapper6)y=k.getWrapperID(this.$OGCollectionRecommendationQuestionWrapper2,this.$OGCollectionRecommendationQuestionWrapper1);h.hide(x);var z=k.plusRecommendation(this.$OGCollectionRecommendationQuestionWrapper4,y,j.byClass(this.$OGCollectionRecommendationQuestionWrapper5,"_58rc"),this.$OGCollectionRecommendationQuestionWrapper3,this.$OGCollectionRecommendationQuestionWrapper1,this.$OGCollectionRecommendationQuestionWrapper6);return Object.assign(z,{collection_token:this.$OGCollectionRecommendationQuestionWrapper1,show_edit_menu:false,show_added_check:true});}else{var aa=k.slideLeftOneUnitAfterAction(this.$OGCollectionRecommendationQuestionWrapper4);h.addClass(x,"_2pbd");var ba=i.listen(x.parentNode,'mouseover',function(){h.removeClass(x,"_2pbd");ba.remove();});return {ignored_item_ids:aa,objectid:this.$OGCollectionRecommendationQuestionWrapper3};}}).bind(this)));}f.exports=n;},null);
__d('CollectionSuggestionAddQuestion',['AsyncRequest','Event','TidyArbiterMixin','mixin','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;m=babelHelpers.inherits(o,k(j));n=m&&m.prototype;function o(p,q,r){'use strict';n.constructor.call(this);this.$CollectionSuggestionAddQuestion1=r;l(i.listen(p.yes,'click',this.handleClick.bind(this).bind(null,'yes',q.yes)));if(p.no)l(i.listen(p.no,'click',this.handleClick.bind(this).bind(null,'no',q.no)));if(p.want)l(i.listen(p.want,'click',this.handleClick.bind(this).bind(null,'want',q.want)));}o.prototype.handleClick=function(p,q){'use strict';var r=this.inform('answered',p);new h(q).setRelativeTo(this.$CollectionSuggestionAddQuestion1).setData(r).send();};f.exports=o;},null);
__d('EgoCollectionsRecommendation',['Arbiter','AsyncRequest','DOM','DOMClone','Tooltip','csx','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o={},p={},q=1500;function r(u,v){new i(u).setHandler(function(w){if(!w.payload)return;var x=null;for(var y in v){if(!x){j.setContent(v[y],w.payload.icon);x=v[y].firstChild;}else j.setContent(v[y],x=k.shallowClone(x));l.set(x,w.payload.tooltip);}}).send();}function s(u,v,event,w){if(w.category!==u)return;var x=p[u];if(!n(x))setTimeout(r.bind(null,v,x),q);}var t={keepIconSynced:function(u,v,w){if(!o[w])o[w]=h.subscribe('AudienceSelector/syncNonSelectorIcon',s.bind(null,w,v));p[w]||(p[w]={});p[w][u.id]=u;},replaceOrInsertTopUnit:function(u,v){if(!u)return;var w=j.scry(u,'^.ego_unit_container')[0];if(!w)return;var x=j.scry(w,"._53ee");if(x[0]){j.replace(x[0],v);}else j.prependContent(w,v);}};f.exports=t;},null);
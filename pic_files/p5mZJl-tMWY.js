/*!CK:1251225035!*//*1442326082,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["RNX+r"]); }

__d('OnlyMeUI',['AudienceSelectorTags','Arbiter','CSS','DOM','Parent','PrivacySelectorBase','PrivacyConst','SelectorDeprecated','$','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();function r(){return [k.create('div',{className:'onlyMeBorder'}),k.create('div',{className:'onlyMeBorder onlyMeBorderBottom'})];}function s(){return k.create('img',{alt:' ',className:'onlyMePrivacyCorner',height:34,src:'/images/profile/timeline/privacy_corner.png',width:34});}function t(aa){var ba=k.scry(aa,'.photoUnit a.photo');return ba.filter(function(ca){return !k.scry(ca,'.onlyMePrivacyCorner').length;});}function u(aa,ba){if(ba instanceof m){if(ba.getTags().length>1)return;}else if(h.hasTags(x(ba)))return;if(j.hasClass(aa,'storyContent'))if(!l.byClass(aa,'onlyMeWrap')){var ca=k.create('div',{className:'onlyMeWrap'});k.appendContent(l.byClass(aa,'uiStreamStory'),ca);k.appendContent(ca,aa);aa=ca;}else aa=l.byClass(aa,'onlyMeWrap');j.addClass(aa,'storyOnlyMe');if(!(ba instanceof m)&&!j.hasClass(aa,'timelineRecentActivityStory'))k.setContent(k.find(ba,'span.uiButtonText'),q._("Only Me"));if(!j.hasClass(aa,'storyContent')){var da=t(aa);for(var ea=0,fa=da.length;ea<fa;++ea)k.appendContent(da[ea],s());}if(!k.scry(aa,'div.onlyMeBorder').length){var ga=r();k.prependContent(aa,ga[0]);k.appendContent(aa,ga[1]);}}function v(aa){if(!aa)return;var ba=l.byClass(aa,'storyContent')||l.byClass(aa,'timelineRecentActivityStory')||l.byClass(aa,'timelineUnitContainer')||l.byClass(aa,'fbTimelineTwoColumn');if(!ba){ba=k.scry(aa,'^.permalink_stream .storyContent');ba=ba.length&&ba[0];}else if(j.hasClass(ba,'fbTimelineComposerUnit'))return null;return ba;}function w(aa){aa=j.hasClass(aa,'storyContent')?l.byClass(aa,'onlyMeWrap'):aa;aa&&j.removeClass(aa,'storyOnlyMe');}function x(aa){var ba=k.scry(aa,'*[data-oid]');if(ba.length===0)return '';return ba[0].getAttribute('data-oid');}var y=false,z={listenAdamaTimelineSelector:function(aa){var ba=aa.getInstance();ba.subscribe('changed',function(event,ca){var da=ba.getTriggerButtonElement(),ea=v(da);if(!ea)return;if(ca.post_param==n.PostParam.ONLY_ME){u(ea,ba);}else w(ea);});},init:function(){if(y)return;y=true;i.subscribe('AudienceSelector/changed',function(aa,ba){if(ba.selector&&j.hasClass(ba.selector,'blacklistOnlyMeUI'))return;var ca=v(ba.selector)||v(ba.clone);if(!ca)return;if(o.getOptionValue(ba.option)==n.BaseValue.SELF){u(ca,ba.selector);}else w(ca);});},setOnlyMe:function(aa){if(y)return;z.init();var ba=l.byClass(p(aa),'uiSelector');aa=ba&&k.find(ba,'a.uiSelectorButton');var ca=v(aa);ca&&u(ca,aa);}};f.exports=z;},null);
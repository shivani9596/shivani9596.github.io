/*!CK:74120035!*//*1444020914,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["j+iuk"]); }

__d('ChatContentSearchFlyout.react',['ChatContentSearchResults.react','Keys','MessengerSearchInput.react','ReactComponentWithPureRenderMixin','React','MercuryShareAttachmentRenderLocations','XUITextInput.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=l.PropTypes,r=' ',s=/\s+/g,t=l.createClass({displayName:'ChatContentSearchFlyout',mixins:[k],propTypes:{location:q.oneOf(m.getValues()),onEscKeyDown:q.func,onResultsLoaded:q.func,onSelect:q.func.isRequired,query:q.string},getInitialState:function(){return {query:this.props.query,viewerEnteredText:false};},componentWillReceiveProps:function(u){if(!this.state.viewerEnteredText)this.setState({query:u.query});},render:function(){return (l.createElement('div',{className:"_1er4",onKeyDown:this._handleKeyDown},l.createElement('div',{className:"_3mtr"},this._renderTextInput()),l.createElement('div',{className:"_3mts"},l.createElement(h,{onResultsLoaded:this.props.onResultsLoaded,onSelect:this.props.onSelect,query:this._normalize(this.state.query)}))));},_renderTextInput:function(){var u=this.props.location===m.MESSENGER?j:n;return (l.createElement(u,{className:"_4qcs",isFocused:true,onChange:this._handleInputChange,onClear:(function(){this.setState({query:'',viewerEnteredText:false});}).bind(this),placeholder:p._("Search GIFs & stickers across apps..."),ref:'input',value:this.state.query||''}));},_handleInputChange:function(u){this.setState({query:u.target.value,viewerEnteredText:u.target.value.length>0});},_normalize:function(u){return (u||'').trim().replace(s,r).toLowerCase();},_handleKeyDown:function(u){if(u.keyCode===i.ESC&&this.props.onEscKeyDown)this.props.onEscKeyDown();}});f.exports=t;},null);